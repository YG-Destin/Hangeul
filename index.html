<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>지니 한글 오라클</title>
<style>
body {
  font-family: system-ui, sans-serif;
  text-align: center;
  background: #f9f9f9;
  padding: 30px;
}
h1 {
  margin-bottom: 10px;
}
#question {
  width: 260px;
  padding: 8px;
  border-radius: 5px;
  border: 1px solid #ccc;
  font-size: 1rem;
  margin-bottom: 20px;
}
fieldset {
  margin: 15px auto;
  width: 260px;
  text-align: left;
  font-size: 0.9rem;
}
legend {
  font-weight: bold;
  font-size: 0.95rem;
}
button {
  margin-top: 15px;
  padding: 6px 12px;
  font-size: 0.95rem;
}
#board {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  gap: 16px;
  margin-top: 35px;
  margin-left: auto;
  margin-right: auto;
  transition: max-width 0.3s ease;
}

/* 각 카드 개수별 폭 지정 */
#board.one-line { max-width: 340px; }   /* 3장용 */
#board.two-lines { max-width: 340px; }  /* 6장용 (3x2) */
#board.three-lines { max-width: 340px; } /* 9장용 (3x3) */

/* 3장일 때 줄바꿈 금지 */
#board.three-cards {
  flex-wrap: nowrap;
}
.card {
  width: 90px;
  height: 130px;
  border-radius: 10px;
  background: linear-gradient(to bottom, #9EDCC2, #F9B0A5, #F9E5A9, #F8F8F8, #7181A5);
  box-shadow: 0 4px 10px rgba(0,0,0,0.15);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 3rem;
  font-weight: bold;
  color: #111;
}

</style>
</head>
<body>

<h1>지니 한글 오라클</h1>

<input type="text" id="question" placeholder="오늘의 질문은?" />

<fieldset>
  <legend>오라클 종류</legend>
  <label><input type="checkbox" id="kor"> 한글 오라클</label><br>
  <label><input type="checkbox" id="con"> 자음 오라클 (행동·의지)</label><br>
  <label><input type="checkbox" id="vow"> 모음 오라클 (감정·방향)</label><br>
  <label><input type="checkbox" id="fin"> 받침 오라클 (결과·잠재)</label>
</fieldset>

<fieldset>
  <legend>배열 고르기</legend>
  <label><input type="radio" name="count" value="1"> 1장</label>
  <label><input type="radio" name="count" value="3"> 3장</label>
  <label><input type="radio" name="count" value="6"> 6장</label>
  <label><input type="radio" name="count" value="9"> 9장</label>
</fieldset>

<button onclick="drawCards()">카드 뽑기</button>

<div id="board"></div>

<script>
const consonants = ['ㄱ','ㄴ','ㄷ','ㄹ','ㅁ','ㅂ','ㅅ','ㅇ','ㅈ','ㅊ','ㅋ','ㅌ','ㅍ','ㅎ','ㄲ','ㄸ','ㅃ','ㅆ','ㅉ'];
const vowels = ['ㅏ','ㅑ','ㅓ','ㅕ','ㅗ','ㅛ','ㅜ','ㅠ','ㅡ','ㅣ','ㅐ','ㅔ','ㅘ','ㅙ','ㅚ','ㅝ','ㅞ','ㅟ','ㅢ','ㅒ','ㅖ'];
const finals = [
  'ㄱ','ㄴ','ㄷ','ㄹ','ㅁ','ㅂ','ㅅ','ㅇ','ㅈ','ㅊ','ㅋ','ㅌ','ㅍ','ㅎ',
  'ㄱㅅ','ㄴㅈ','ㄴㅎ','ㄹㄱ','ㄹㅁ','ㄹㅂ','ㄹㅅ','ㄹㅌ','ㄹㅍ','ㄹㅎ','ㅂㅅ',
  'ㄲ','ㅆ','없음'
];

function randomPick(arr) {
  return arr[Math.floor(Math.random() * arr.length)];
}

function drawCards() {
  const board = document.getElementById('board');
  board.innerHTML = '';
  board.classList.remove('three-cards');  // 매번 초기화 먼저

  const count = parseInt(document.querySelector('input[name="count"]:checked')?.value || 0);
  if (!count) return alert('배열 수를 선택하세요.');

  const kor = document.getElementById('kor').checked;
  const con = document.getElementById('con').checked;
  const vow = document.getElementById('vow').checked;
  const fin = document.getElementById('fin').checked;

  if (!(kor || con || vow || fin)) return alert('오라클 종류를 선택하세요.');

  const cycle = ['초성','중성','종성'];

  // --- 카드 생성 구간 ---
  if (kor) {
    for (let i = 0; i < count; i++) {
      const type = cycle[i % 3];
      const card = document.createElement('div');
      card.className = 'card';
      if (type === '초성') card.textContent = randomPick(consonants);
      if (type === '중성') card.textContent = randomPick(vowels);
      if (type === '종성') card.textContent = randomPick(finals);
      board.appendChild(card);
    }
  }

  if (con)
    for (let i = 0; i < count; i++)
      board.innerHTML += `<div class="card">${randomPick(consonants)}</div>`;

  if (vow)
    for (let i = 0; i < count; i++)
      board.innerHTML += `<div class="card">${randomPick(vowels)}</div>`;

  if (fin)
    for (let i = 0; i < count; i++)
      board.innerHTML += `<div class="card">${randomPick(finals)}</div>`;

  // --- 카드 생성이 모두 끝난 뒤에 위치 ---
  board.classList.remove('three-cards','one-line','two-lines','three-lines');

  if (count === 1) board.classList.add('one-line');
  if (count === 3) board.classList.add('three-cards','one-line');
  if (count === 6) board.classList.add('two-lines');
  if (count === 9) board.classList.add('three-lines');
}
</script>

</body>
</html>